# 6. Графический интерфейс для анализа SNatch
  
*SNatch* – это инструмент с графическим интерфейсом, предназначенный для постобработки и отображения данных, полученных от инструмента *Natch*. Работать с этим интерфейсом можно через браузер.

## 6.1. Системные требования

Тестирование инструмента проводилось на ОС Ubuntu 20.04 и Ubuntu 22.04. В качестве браузеров использовались Google Chrome версии 105.0.5148.2 и выше и Mozilla Firefox версии 101.0 и выше.

Необходимые для функционирования *SNatch* пакеты будут автоматически установлены в ходе первоначальной настройки.

## 6.2. Настройка и запуск

Для работы графического интерфейса *SNatch* необходимо подготовить окружение, а именно установить ряд пакетов для Ubuntu и Python, а также создать базу данных. Все это делается автоматически с помощью скрипта *snatch_setup.sh*. Для установки потребуется пароль для sudo. Пакеты для Python устанавливаются в виртуальную среду, таким образом пакеты на вашей машине не будут переустанавливаться и конфликтовать. Процесс займет некоторое время, запускать скрипт нужно только при первом использовании.

Помимо скрипта для настройки окружения в пакет поставки входят скрипты *snatch_run.sh* и *snatch_stop.sh* для запуска и остановки *SNatch* соответственно. Скрипт *snatch_run.sh* запускает необходимые для работы службы, а также открывает браузер с интерфейсом. В терминал, из которого был запущен скрипт, будут приходить сообщения от сервера, однако, он свободен для использования, поэтому по окончании работы из него же можно запустить скрипт *snatch_stop.sh* для остановки служб. Запускать *snatch_stop.sh* следует всегда, в противном случае процессы останутся висеть в памяти вашего компьютера до перезагрузки.

Все скрипты для *SNatch* можно запускать из любого расположения. Если по какой-то причине при запуске
*snatch_run.sh* страница в браузере не загрузилась, но при этом службы запустились, следует обновить страницу.

<img src="https://raw.githubusercontent.com/ispras/natch/main/images/snatch/snatch_interface.png" width="954" height="561">
  
На данном рисунке показано окно *SNatch*, где цифрами обозначены основные элементы интерфейса:

1. Кнопка для повторной загрузки архив с файлами поверхности атаки (далее просто: "архив")
2. Пункт меню, открывающий граф вызовов
3. Кнопка генерации графа вызовов
4. Список графов процессов
5. Всплывающие меню для взаимодействия с проектами (создание нового, открытие существующих и удаление существующих)
6. Кнопка открытия меню взаимодействия с проектами
7. Название открытого проекта
8. Открытые вкладки с содержимым (таким как: графы вызовов и графы процессов)
9. Окно отображения содержимого

Для создания нового проекта необходимо нажатием на (6) открыть меню проектов и выбрать *New project...*. Для переключения между существующим проектами необходимо из меню проектов в списке *Existing projects:* выбрать название интересующего проекта. Для удаления проекта достаточно в списке проектов нажать на кнопку *del* рядом с именем удаляемого проекта.

При нажатии на (1) в уже открытом проекте пользователю будет предложено выбрать новый архив (данный архив получается в результате работы *Natch*), после чего текущие данные в проекте будут стёрты и заменены полученными в результате обработки предоставленного файла.

При создании нового проекта происходит открытие модального окна:

<img src="https://raw.githubusercontent.com/ispras/natch/main/images/snatch/snatch_newproj.png">  

В данном окне пользователь может ввести имя нового проекта в соответствующее поле *Project name*,
а также выбрать архив поверхности атаки в *Choose surface file* (данный архив получается в результате работы *Natch*). Если оба этих поля заполнены, то становится активна кнопка *Create*, по нажатию на которую произойдет закрытие данного модального окна, создание нового проекта, автоматическое переключение на него и запуск процесса обработки архива. При нажатии на кнопку *Close* происходит закрытие модального окна.

Во время обработки архива поверхности атаки в верхней части экрана появляется шкала прогресса следующего вида:
 
<img src="https://raw.githubusercontent.com/ispras/natch/main/images/snatch/snatch_progressbar.png">  

